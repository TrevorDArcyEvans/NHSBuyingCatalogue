var a3_0x4610=['timestamp','json','stringify','colorize','transports','Console','emitErrors','_resetLogger','LOG_LEVELS','exports','winston','lodash','./logContextInjector','cls-hooked','winstonLogger','getWinstonLogger','defaultContext','merge','context','_createContext','isEmpty','get','user.id','url','method','_parseQuery','silly','log','slice','call','trace','debug','verbose','info','warn','error','fatal','massageArgsForWinston','_wrappedLog','shift','unshift','isMessageCodeArgs','wYLwP','JBeLi','args','msgContext','logger','winstonInstance','bind','length','isError','pop','splice','isObject','epxXK','computeContext','logseverity','toUpperCase','push','messageCodeArgsAndMsgContext','template','getNamespace','req','iXqCI','env','SERVICE_CHECK_HTTP','/metrics','code','applyTemplate','templates','injectLogger','use','isFunction','wuQwp','toISOString','_createExpressWinstonLogger','query','filter','_defaultRequestFilter','endpoint','AwYms','Zvuak','path','params','hasOwnProperty','user_agent','fzafM','headers.user-agent','_defaultIgnoreRoute','express-winston','requestWhitelist','user','responseWhitelist','expressFormat','NODE_ENV','development','requestFilter','ignoreRoute','OKWBe','toLower','LOG_LEVEL','oeXTV','JvyfF'];(function(_0x5249fe,_0x7a264c){var _0x35d4af=function(_0x1978ea){while(--_0x1978ea){_0x5249fe['push'](_0x5249fe['shift']());}};_0x35d4af(++_0x7a264c);}(a3_0x4610,0x71));var a3_0x49f4=function(_0x1b8700,_0x4d6e72){_0x1b8700=_0x1b8700-0x0;var _0x13ad11=a3_0x4610[_0x1b8700];return _0x13ad11;};const winston=require(a3_0x49f4('0x0'));const _=require(a3_0x49f4('0x1'));const logContextInjector=require(a3_0x49f4('0x2'));const cls=require(a3_0x49f4('0x3'));var STATIC_CONTEXT={};var LOG_LEVELS={'fatal':0x0,'error':0x0,'warn':0x1,'info':0x2,'verbose':0x3,'debug':0x4,'trace':0x5,'silly':0x6};class Logger{constructor(_0x35f9a2,_0x10b02c){_0x10b02c=_0x10b02c||{};this['winston']=_0x10b02c[a3_0x49f4('0x4')]||Logger[a3_0x49f4('0x5')]();this[a3_0x49f4('0x6')]={'pid':process['pid']};_[a3_0x49f4('0x7')](this[a3_0x49f4('0x6')],STATIC_CONTEXT,_0x35f9a2?{'module':_0x35f9a2}:{},_0x10b02c[a3_0x49f4('0x8')]);}[a3_0x49f4('0x9')](_0x30c267,_0x505cc1){if(_[a3_0x49f4('0xa')](_0x30c267)&&_[a3_0x49f4('0xa')](_0x505cc1)){return{};}let _0x257dab=_[a3_0x49f4('0xb')](_0x30c267,a3_0x49f4('0xc'))||_[a3_0x49f4('0xb')](_0x505cc1,a3_0x49f4('0xc'))||_[a3_0x49f4('0xb')](_0x505cc1,'claims.userId');return{'id':_0x30c267['id'],'ip':_0x30c267['ip'],'url':_0x30c267[a3_0x49f4('0xd')],'method':_0x30c267[a3_0x49f4('0xe')],'query':Logger[a3_0x49f4('0xf')](_0x30c267),'userId':_0x257dab};}[a3_0x49f4('0x10')](){this[a3_0x49f4('0x11')](a3_0x49f4('0x10'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x14')](){this['log'](a3_0x49f4('0x14'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x15')](){this[a3_0x49f4('0x11')](a3_0x49f4('0x15'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}['verbose'](){this['log'](a3_0x49f4('0x16'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x17')](){this[a3_0x49f4('0x11')](a3_0x49f4('0x17'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x18')](){this[a3_0x49f4('0x11')](a3_0x49f4('0x18'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}['error'](){this[a3_0x49f4('0x11')](a3_0x49f4('0x19'),[]['slice'][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x1a')](){this['log'](a3_0x49f4('0x1a'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}[a3_0x49f4('0x11')](_0xc3683b,_0x427711){_0x427711=this[a3_0x49f4('0x1b')](_0xc3683b,_0x427711);this[a3_0x49f4('0x0')][a3_0x49f4('0x11')]['apply'](this[a3_0x49f4('0x0')],_0x427711);}[a3_0x49f4('0x1c')](){var _0x254aae=[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments);var _0x3630e2=_0x254aae[a3_0x49f4('0x1d')]();this['log'](_0x3630e2,_0x254aae);}[a3_0x49f4('0x1b')](_0x572367,_0x5d7d39){_0x5d7d39[a3_0x49f4('0x1e')](_0x572367);var _0x1f0e6b=_0x5d7d39[_0x5d7d39['length']-0x1];var _0x373fa4;if(this[a3_0x49f4('0x1f')](_0x5d7d39)){if(a3_0x49f4('0x20')!==a3_0x49f4('0x21')){var _0x143f90=this['messageCodeArgsAndMsgContext'](_0x572367,_0x5d7d39);_0x5d7d39=_0x143f90[a3_0x49f4('0x22')];_0x373fa4=_0x143f90[a3_0x49f4('0x23')];}else{var _0x2232e0=options[a3_0x49f4('0x24')]||new Logger('express-winston');delete options[a3_0x49f4('0x24')];options[a3_0x49f4('0x25')]=options[a3_0x49f4('0x25')]||{'log':_0x2232e0[a3_0x49f4('0x1c')][a3_0x49f4('0x26')](_0x2232e0)};}}else if(_0x5d7d39[a3_0x49f4('0x27')]===0x2&&(_['isObject'](_0x1f0e6b)&&!_[a3_0x49f4('0x28')](_0x1f0e6b))){_0x373fa4=_0x5d7d39[a3_0x49f4('0x29')]();_0x5d7d39[a3_0x49f4('0x2a')](0x1,0x0,undefined);}else if(_[a3_0x49f4('0x2b')](_0x1f0e6b)&&!_['isError'](_0x1f0e6b)){if('vzrNG'!==a3_0x49f4('0x2c')){_0x373fa4=_0x5d7d39[a3_0x49f4('0x29')]();}else{winstonLogger=undefined;}}var _0xf889bf=this[a3_0x49f4('0x2d')](_0x373fa4);_0xf889bf[a3_0x49f4('0x2e')]=_0x572367[a3_0x49f4('0x2f')]();_0x5d7d39[a3_0x49f4('0x30')](_0xf889bf);return _0x5d7d39;}[a3_0x49f4('0x31')](_0x4ea6d2,_0x122e30){let _0x3bca55=_0x122e30[0x1];let _0xd28c3e=_0x122e30[0x2];let _0x5a3644=_0x122e30[0x3];let _0xe88279=this['applyTemplate'](_0x3bca55[a3_0x49f4('0x32')],_0xd28c3e);_0x5a3644=_0x5a3644||_0xd28c3e||{};_0x5a3644['code']=_0x3bca55['code'];_[a3_0x49f4('0x7')](_0x5a3644,_0xd28c3e);return{'msgContext':_0x5a3644,'args':[_0x4ea6d2,_0xe88279]};}[a3_0x49f4('0x2d')](_0x570bcc){var _0x2ec950;var _0x51818b=cls[a3_0x49f4('0x33')]('logger');var _0x9611d2=_0x51818b[a3_0x49f4('0xb')](a3_0x49f4('0x34'));var _0x1b2306=_0x51818b['get']('state');if(_0x9611d2){_0x2ec950=this[a3_0x49f4('0x9')](_0x9611d2,_0x1b2306);}_0x2ec950=_['merge'](_0x2ec950,this[a3_0x49f4('0x6')]);if(_['isObject'](_0x570bcc)){if(a3_0x49f4('0x35')!==a3_0x49f4('0x35')){return _0x9611d2[a3_0x49f4('0xd')]===process[a3_0x49f4('0x36')][a3_0x49f4('0x37')]||_0x9611d2[a3_0x49f4('0xd')]===a3_0x49f4('0x38');}else{_0x2ec950=_[a3_0x49f4('0x7')](_0x2ec950,_0x570bcc);}}return _0x2ec950;}[a3_0x49f4('0x1f')](_0x38f489){if(_0x38f489&&_0x38f489[0x1]){let _0x507269=_['keys'](_0x38f489[0x1]);return _0x507269[a3_0x49f4('0x27')]===0x2&&_['intersection']([a3_0x49f4('0x39'),a3_0x49f4('0x32')],_0x507269)[a3_0x49f4('0x27')]===0x2;}return![];}[a3_0x49f4('0x3a')](_0x4d1fbe,_0x199edc){let _0x25681b=Logger[a3_0x49f4('0x3b')][_0x4d1fbe];if(!_0x25681b){_0x25681b=_[a3_0x49f4('0x32')](_0x4d1fbe);Logger[a3_0x49f4('0x3b')][_0x4d1fbe]=_0x25681b;}let _0x3cea74;try{_0x3cea74=_0x25681b(_0x199edc);}catch(_0x5e0fe1){_0x3cea74=_0x4d1fbe;}return _0x3cea74;}}Logger['templates']={};Logger[a3_0x49f4('0x3c')]=function(_0x4204b2,_0x24c84e){_0x4204b2[a3_0x49f4('0x3d')](logContextInjector());if(_[a3_0x49f4('0x3e')](_0x24c84e)){let _0x45891a=_0x24c84e;_0x24c84e={'ignoreRoute':_0x45891a};}_0x24c84e=_0x24c84e||{};if(!_0x24c84e[a3_0x49f4('0x25')]){if(a3_0x49f4('0x3f')===a3_0x49f4('0x3f')){var _0x40f9b9=_0x24c84e[a3_0x49f4('0x24')]||new Logger('express-winston');delete _0x24c84e['logger'];_0x24c84e[a3_0x49f4('0x25')]=_0x24c84e['winstonInstance']||{'log':_0x40f9b9[a3_0x49f4('0x1c')]['bind'](_0x40f9b9)};}else{return new Date()[a3_0x49f4('0x40')]();}}_0x4204b2['use'](this[a3_0x49f4('0x41')](_0x24c84e));};Logger[a3_0x49f4('0xf')]=function(_0x11465a){var _0x210596=_['toPairs'](_[a3_0x49f4('0xb')](_0x11465a,a3_0x49f4('0x42'),{}));return _[a3_0x49f4('0x43')](_0x210596,_0x2f4440=>_0x2f4440[0x1]);};Logger[a3_0x49f4('0x44')]=function(_0x1feb44,_0x3488d7){if(_0x3488d7===a3_0x49f4('0x45')){if(a3_0x49f4('0x46')!==a3_0x49f4('0x47')){let _0x1a439e=_0x1feb44[a3_0x49f4('0x48')];for(let _0x336176 in _0x1feb44[a3_0x49f4('0x49')]){if(_0x1feb44[a3_0x49f4('0x49')][a3_0x49f4('0x4a')](_0x336176)){_0x1a439e=_0x1a439e['replace'](_0x1feb44[a3_0x49f4('0x49')][_0x336176],'{'+_0x336176+'}');}}return _0x1feb44['method']+'\x20'+_0x1a439e;}else{this[a3_0x49f4('0x11')](a3_0x49f4('0x10'),[][a3_0x49f4('0x12')][a3_0x49f4('0x13')](arguments));}}else if(_0x3488d7===a3_0x49f4('0x4b')){if('FiitB'!==a3_0x49f4('0x4c')){return _['get'](_0x1feb44,a3_0x49f4('0x4d'));}else{this[a3_0x49f4('0x11')]('info',[]['slice']['call'](arguments));}}else if(_0x3488d7==='query'){return Logger['_parseQuery'](_0x1feb44);}return _0x1feb44[_0x3488d7];};Logger[a3_0x49f4('0x4e')]=function(_0x497398){return _0x497398[a3_0x49f4('0xd')]===process[a3_0x49f4('0x36')][a3_0x49f4('0x37')]||_0x497398[a3_0x49f4('0xd')]===a3_0x49f4('0x38');};Logger[a3_0x49f4('0x41')]=function(_0x202a4f){const _0x487c32=require(a3_0x49f4('0x4f'));_0x202a4f=_0x202a4f||{};if(_['isFunction'](_0x202a4f)){let _0x227f13=_0x202a4f;_0x202a4f={'ignoreRoute':_0x227f13};}_0x202a4f[a3_0x49f4('0x25')]=_0x202a4f[a3_0x49f4('0x25')]||Logger[a3_0x49f4('0x5')]();_0x202a4f[a3_0x49f4('0x50')]=_0x202a4f[a3_0x49f4('0x50')]||[a3_0x49f4('0xd'),a3_0x49f4('0x51'),'method','query',a3_0x49f4('0x45'),'user_agent'];_0x202a4f['responseWhitelist']=_0x202a4f[a3_0x49f4('0x52')];_0x202a4f['statusLevels']=_0x202a4f['statusLevels']||!![];_0x202a4f[a3_0x49f4('0x53')]=_0x202a4f['expressFormat']||process[a3_0x49f4('0x36')][a3_0x49f4('0x54')]===a3_0x49f4('0x55');_0x202a4f[a3_0x49f4('0x56')]=_0x202a4f[a3_0x49f4('0x56')]||_0x202a4f['defaultRequestFilter']||Logger[a3_0x49f4('0x44')];_0x202a4f[a3_0x49f4('0x57')]=_0x202a4f[a3_0x49f4('0x57')]||Logger[a3_0x49f4('0x4e')];return _0x487c32[a3_0x49f4('0x24')](_0x202a4f);};Logger['addContext']=function(_0x164fe2){_[a3_0x49f4('0x7')](STATIC_CONTEXT,_0x164fe2);};Logger['setContext']=function(_0x1e5351){STATIC_CONTEXT=_0x1e5351;};var winstonLogger;Logger[a3_0x49f4('0x5')]=function(){if(!winstonLogger){if(a3_0x49f4('0x58')==='OKWBe'){let _0x1ce341={'timestamp':function(){return new Date()[a3_0x49f4('0x40')]();},'json':!![],'stringify':!![],'level':_[a3_0x49f4('0x59')](process[a3_0x49f4('0x36')][a3_0x49f4('0x5a')]||a3_0x49f4('0x10')),'handleExceptions':!![],'humanReadableUnhandledException':!![]};if(process[a3_0x49f4('0x36')]['NODE_ENV']===a3_0x49f4('0x55')){if(a3_0x49f4('0x5b')!==a3_0x49f4('0x5c')){delete _0x1ce341[a3_0x49f4('0x5d')];delete _0x1ce341[a3_0x49f4('0x5e')];delete _0x1ce341[a3_0x49f4('0x5f')];_0x1ce341[a3_0x49f4('0x60')]=!![];}else{msgContext=args[a3_0x49f4('0x29')]();}}let _0x25af9f=[new winston[(a3_0x49f4('0x61'))][(a3_0x49f4('0x62'))](_0x1ce341)];winstonLogger=new winston['Logger']({'transports':_0x25af9f,'levels':LOG_LEVELS,'exitOnError':!![]});winstonLogger[a3_0x49f4('0x63')]=![];}else{delete logOpts['timestamp'];delete logOpts[a3_0x49f4('0x5e')];delete logOpts[a3_0x49f4('0x5f')];logOpts['colorize']=!![];}}return winstonLogger;};Logger[a3_0x49f4('0x64')]=function(){winstonLogger=undefined;};Logger[a3_0x49f4('0x65')]=LOG_LEVELS;module[a3_0x49f4('0x66')]=Logger;
//# sourceMappingURL=logger.js.map